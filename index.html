<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyChicken</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 to-yellow-50 min-h-screen">
    <!-- Halaman 1: Hitung Harga -->
    <div id="page1" class="container mx-auto px-4 py-8 max-w-md">
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <div class="text-center mb-6">
                <div class="text-4xl mb-2">🐔</div>
                <h1 class="text-2xl font-bold text-gray-800">My Chicken</h1>
                <p class="text-gray-600 text-sm">Hitung harga ayam berdasarkan berat</p>
            </div>

            <!-- Setting Harga -->
            <div class="bg-orange-50 rounded-xl p-4 mb-6">
                <h3 class="font-semibold text-gray-700 mb-3 flex items-center">
                    ⚙️ Pengaturan Harga
                </h3>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-1">Harga per Kg</label>
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">Rp</span>
                            <input type="number" id="hargaPerKg" value="35000" 
                                   class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Berat dan Ekor -->
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Berat Total (Kg)</label>
                    <input type="number" id="beratTotal" step="0.1" placeholder="0.0"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Jumlah Ekor</label>
                    <input type="number" id="jumlahEkor" placeholder="0"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg">
                </div>
            </div>

            <!-- Hasil Perhitungan -->
            <div class="bg-gray-50 rounded-xl p-4 mb-6">
                <h3 class="font-semibold text-gray-700 mb-3">💰 Total Harga</h3>
                <div class="text-3xl font-bold text-orange-600" id="totalHarga">Rp 0</div>
                <div class="text-sm text-gray-600 mt-1" id="detailHarga">0 kg × Rp 0 = Rp 0</div>
            </div>

            <button onclick="lanjutKeHalaman2()" id="btnLanjut" disabled
                    class="w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                Lanjut ke Pembayaran →
            </button>
        </div>
    </div>

    <!-- Halaman 2: Detail Pembeli dan Pembayaran -->
    <div id="page2" class="container mx-auto px-4 py-8 max-w-md hidden">
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <div class="text-center mb-6">
                <div class="text-4xl mb-2">📝</div>
                <h1 class="text-2xl font-bold text-gray-800">Detail Pembeli</h1>
                <p class="text-gray-600 text-sm">Lengkapi informasi pembayaran</p>
            </div>

            <!-- Ringkasan Pesanan -->
            <div class="bg-orange-50 rounded-xl p-4 mb-6">
                <h3 class="font-semibold text-gray-700 mb-2">📋 Ringkasan Pesanan</h3>
                <div class="text-sm space-y-1">
                    <div class="flex justify-between">
                        <span>Berat:</span>
                        <span id="ringkasanBerat">0 kg</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Jumlah Ekor:</span>
                        <span id="ringkasanEkor">0 ekor</span>
                    </div>
                    <div class="flex justify-between font-semibold text-orange-600">
                        <span>Total:</span>
                        <span id="ringkasanTotal">Rp 0</span>
                    </div>
                </div>
            </div>

            <!-- Form Detail -->
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Pembeli</label>
                    <input type="text" id="namaPembeli" placeholder="Masukkan nama pembeli"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                </div>

                <!-- Opsi Bubut -->
                <div class="bg-yellow-50 rounded-xl p-4">
                    <h3 class="font-semibold text-gray-700 mb-3">🔪 Layanan Bubut</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="radio" name="bubut" value="tidak" checked
                                   class="w-4 h-4 text-orange-600 focus:ring-orange-500">
                            <span class="ml-2 text-sm">Tidak perlu dibubut</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="bubut" value="ya"
                                   class="w-4 h-4 text-orange-600 focus:ring-orange-500">
                            <span class="ml-2 text-sm">Ya, bubut ayam</span>
                        </label>
                    </div>
                    
                    <div id="hargaBubutContainer" class="mt-3 hidden">
                        <label class="block text-sm font-medium text-gray-600 mb-1">Harga Bubut per Ekor</label>
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">Rp</span>
                            <input type="number" id="hargaBubut" value="3000"
                                   class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Total Akhir -->
                <div class="bg-gray-50 rounded-xl p-4">
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>Harga Ayam:</span>
                            <span id="hargaAyamFinal">Rp 0</span>
                        </div>
                        <div class="flex justify-between text-sm" id="hargaBubutRow" style="display: none;">
                            <span>Biaya Bubut:</span>
                            <span id="biayaBubut">Rp 0</span>
                        </div>
                        <hr class="my-2">
                        <div class="flex justify-between font-bold text-lg text-orange-600">
                            <span>Total Bayar:</span>
                            <span id="totalBayar">Rp 0</span>
                        </div>
                    </div>
                </div>

                <!-- Input Pembayaran -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Uang Dibayarkan</label>
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">Rp</span>
                        <input type="number" id="uangDibayar" placeholder="0"
                               class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg">
                    </div>
                </div>

                <!-- Kembalian -->
                <div class="bg-green-50 rounded-xl p-4" id="kembalianContainer" style="display: none;">
                    <div class="flex justify-between items-center">
                        <span class="font-semibold text-gray-700">💵 Kembalian:</span>
                        <span class="text-xl font-bold text-green-600" id="kembalian">Rp 0</span>
                    </div>
                </div>
            </div>

            <div class="flex space-x-3">
                <button onclick="kembaliKeHalaman1()"
                        class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                    ← Kembali
                </button>
                <button onclick="selesaikanTransaksi()" id="btnSelesai"
                        class="flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                    Selesai
                </button>
            </div>
        </div>
    </div>

    <!-- Halaman 3: Hasil Akhir -->
    <div id="page3" class="container mx-auto px-4 py-8 max-w-md hidden">
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <div class="text-center mb-6">
                <div class="text-4xl mb-2">✅</div>
                <h1 class="text-2xl font-bold text-gray-800">Transaksi Selesai</h1>
                <p class="text-gray-600 text-sm">Terima kasih atas pembeliannya!</p>
            </div>

            <!-- Struk -->
            <div class="bg-gray-50 rounded-xl p-6 mb-6" id="struk">
                <div class="text-center mb-4">
                    <h2 class="text-lg font-bold">🐔 MyChicken </h2>
                    <p class="text-sm text-gray-600" id="tanggalTransaksi"></p>
                </div>
                
                <hr class="my-4">
                
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span>Nama Pembeli:</span>
                        <span id="strukNama">-</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Berat Ayam:</span>
                        <span id="strukBerat">0 kg</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Jumlah Ekor:</span>
                        <span id="strukEkor">0 ekor</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Harga per Kg:</span>
                        <span id="strukHargaKg">Rp 0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Subtotal Ayam:</span>
                        <span id="strukSubtotal">Rp 0</span>
                    </div>
                    <div class="flex justify-between" id="strukBubutRow" style="display: none;">
                        <span>Biaya Bubut:</span>
                        <span id="strukBiayaBubut">Rp 0</span>
                    </div>
                    
                    <hr class="my-2">
                    
                    <div class="flex justify-between font-bold">
                        <span>Total Bayar:</span>
                        <span id="strukTotal">Rp 0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Uang Dibayar:</span>
                        <span id="strukDibayar">Rp 0</span>
                    </div>
                    <div class="flex justify-between font-semibold text-green-600">
                        <span>Kembalian:</span>
                        <span id="strukKembalian">Rp 0</span>
                    </div>
                </div>
            </div>

            <button onclick="transaksiBaru()"
                    class="w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                🔄 Transaksi Baru
            </button>
        </div>
    </div>

    <script>
        let dataTransaksi = {};

        // Format rupiah
        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(angka);
        }

        // Hitung total harga di halaman 1
        function hitungTotal() {
            const hargaPerKg = parseFloat(document.getElementById('hargaPerKg').value) || 0;
            const beratTotal = parseFloat(document.getElementById('beratTotal').value) || 0;
            const jumlahEkor = parseInt(document.getElementById('jumlahEkor').value) || 0;
            
            const total = hargaPerKg * beratTotal;
            
            document.getElementById('totalHarga').textContent = formatRupiah(total);
            document.getElementById('detailHarga').textContent = 
                `${beratTotal} kg × ${formatRupiah(hargaPerKg)} = ${formatRupiah(total)}`;
            
            // Enable/disable tombol lanjut
            const btnLanjut = document.getElementById('btnLanjut');
            if (beratTotal > 0 && jumlahEkor > 0) {
                btnLanjut.disabled = false;
            } else {
                btnLanjut.disabled = true;
            }
        }

        // Event listeners untuk halaman 1
        document.getElementById('hargaPerKg').addEventListener('input', hitungTotal);
        document.getElementById('beratTotal').addEventListener('input', hitungTotal);
        document.getElementById('jumlahEkor').addEventListener('input', hitungTotal);

        // Lanjut ke halaman 2
        function lanjutKeHalaman2() {
            dataTransaksi.hargaPerKg = parseFloat(document.getElementById('hargaPerKg').value);
            dataTransaksi.beratTotal = parseFloat(document.getElementById('beratTotal').value);
            dataTransaksi.jumlahEkor = parseInt(document.getElementById('jumlahEkor').value);
            dataTransaksi.totalAyam = dataTransaksi.hargaPerKg * dataTransaksi.beratTotal;
            
            // Update ringkasan
            document.getElementById('ringkasanBerat').textContent = `${dataTransaksi.beratTotal} kg`;
            document.getElementById('ringkasanEkor').textContent = `${dataTransaksi.jumlahEkor} ekor`;
            document.getElementById('ringkasanTotal').textContent = formatRupiah(dataTransaksi.totalAyam);
            document.getElementById('hargaAyamFinal').textContent = formatRupiah(dataTransaksi.totalAyam);
            
            hitungTotalAkhir();
            
            document.getElementById('page1').classList.add('hidden');
            document.getElementById('page2').classList.remove('hidden');
        }

        // Handle radio button bubut
        document.querySelectorAll('input[name="bubut"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const hargaBubutContainer = document.getElementById('hargaBubutContainer');
                if (this.value === 'ya') {
                    hargaBubutContainer.classList.remove('hidden');
                } else {
                    hargaBubutContainer.classList.add('hidden');
                }
                hitungTotalAkhir();
            });
        });

        // Hitung total akhir di halaman 2
        function hitungTotalAkhir() {
            const perluBubut = document.querySelector('input[name="bubut"]:checked').value === 'ya';
            const hargaBubut = parseFloat(document.getElementById('hargaBubut').value) || 0;
            
            let biayaBubut = 0;
            if (perluBubut) {
                biayaBubut = hargaBubut * dataTransaksi.jumlahEkor;
                document.getElementById('hargaBubutRow').style.display = 'flex';
                document.getElementById('biayaBubut').textContent = formatRupiah(biayaBubut);
            } else {
                document.getElementById('hargaBubutRow').style.display = 'none';
            }
            
            const totalBayar = dataTransaksi.totalAyam + biayaBubut;
            document.getElementById('totalBayar').textContent = formatRupiah(totalBayar);
            
            dataTransaksi.biayaBubut = biayaBubut;
            dataTransaksi.totalBayar = totalBayar;
            dataTransaksi.perluBubut = perluBubut;
            
            hitungKembalian();
        }

        // Hitung kembalian
        function hitungKembalian() {
            const uangDibayar = parseFloat(document.getElementById('uangDibayar').value) || 0;
            const kembalian = uangDibayar - dataTransaksi.totalBayar;
            
            if (uangDibayar > 0) {
                document.getElementById('kembalianContainer').style.display = 'block';
                if (kembalian >= 0) {
                    document.getElementById('kembalian').textContent = formatRupiah(kembalian);
                    document.getElementById('kembalian').className = 'text-xl font-bold text-green-600';
                } else {
                    document.getElementById('kembalian').textContent = formatRupiah(Math.abs(kembalian)) + ' (kurang)';
                    document.getElementById('kembalian').className = 'text-xl font-bold text-red-600';
                }
            } else {
                document.getElementById('kembalianContainer').style.display = 'none';
            }
            
            dataTransaksi.uangDibayar = uangDibayar;
            dataTransaksi.kembalian = kembalian;
        }

        // Event listeners untuk halaman 2
        document.getElementById('hargaBubut').addEventListener('input', hitungTotalAkhir);
        document.getElementById('uangDibayar').addEventListener('input', hitungKembalian);

        // Kembali ke halaman 1
        function kembaliKeHalaman1() {
            document.getElementById('page2').classList.add('hidden');
            document.getElementById('page1').classList.remove('hidden');
        }

        // Selesaikan transaksi
        function selesaikanTransaksi() {
            const namaPembeli = document.getElementById('namaPembeli').value.trim();
            
            if (!namaPembeli) {
                alert('Mohon isi nama pembeli!');
                return;
            }
            
            if (dataTransaksi.uangDibayar < dataTransaksi.totalBayar) {
                alert('Uang yang dibayarkan kurang!');
                return;
            }
            
            dataTransaksi.namaPembeli = namaPembeli;
            
            // Update struk
            document.getElementById('tanggalTransaksi').textContent = 
                new Date().toLocaleDateString('id-ID', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            
            document.getElementById('strukNama').textContent = dataTransaksi.namaPembeli;
            document.getElementById('strukBerat').textContent = `${dataTransaksi.beratTotal} kg`;
            document.getElementById('strukEkor').textContent = `${dataTransaksi.jumlahEkor} ekor`;
            document.getElementById('strukHargaKg').textContent = formatRupiah(dataTransaksi.hargaPerKg);
            document.getElementById('strukSubtotal').textContent = formatRupiah(dataTransaksi.totalAyam);
            document.getElementById('strukTotal').textContent = formatRupiah(dataTransaksi.totalBayar);
            document.getElementById('strukDibayar').textContent = formatRupiah(dataTransaksi.uangDibayar);
            document.getElementById('strukKembalian').textContent = formatRupiah(dataTransaksi.kembalian);
            
            if (dataTransaksi.perluBubut) {
                document.getElementById('strukBubutRow').style.display = 'flex';
                document.getElementById('strukBiayaBubut').textContent = formatRupiah(dataTransaksi.biayaBubut);
            }
            
            document.getElementById('page2').classList.add('hidden');
            document.getElementById('page3').classList.remove('hidden');
        }

        // Transaksi baru
        function transaksiBaru() {
            // Reset semua form
            document.getElementById('beratTotal').value = '';
            document.getElementById('jumlahEkor').value = '';
            document.getElementById('namaPembeli').value = '';
            document.getElementById('uangDibayar').value = '';
            document.querySelector('input[name="bubut"][value="tidak"]').checked = true;
            document.getElementById('hargaBubutContainer').classList.add('hidden');
            
            // Reset data
            dataTransaksi = {};
            
            // Hitung ulang
            hitungTotal();
            
            // Kembali ke halaman 1
            document.getElementById('page3').classList.add('hidden');
            document.getElementById('page1').classList.remove('hidden');
        }

        hitungTotal();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9773e6d2a0925fce',t:'MTc1NjU1Mjg1NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>